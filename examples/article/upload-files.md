# upload-files上传文件的分析

## 目标

1. 支持上传文件
2. 上传文件后，可以绑定特定参数值
3. 该文件可以指定特殊用途
4. 支持批量上传//开发这边认为是一个目标，从用户体验上看

## 思路（实现角度考虑）

1. 支持批量上传文件，则上传文件这件事必须是独立的事件，不能携带其他的参数条件。否则，同时上传多个文件，每个文件的参数不一致，则一个接口很难实现。目前使用的接口是“/task/uploadxls”
2. 随后，后端需要对该文件进行初始化（数据读取），转换为php可以快速读取的内容，同时返回文件的名称和id值。目前佣金分析报表使用的接口是“/bms-pub/xls-commission/import_init”，其他页面的接口名称应该不一样。
3. 最后，前端支持用户上传参数与该文件的数据作为一个整体使用。入参为文件id，以及需要绑定的参数。目前佣金分析报表使用的是“/bms-pub/xls-commission/import”，其他页面的接口名称应该不一样。
4. 实际上，第2和第3步，后端完全可以在一步实现。仅仅只是因为后端划分的模块之间没有很好的沟通流程，所以交由前端来进行关键数据的传递而已。对前端来说，第2步和第3步本身就是一件事。

## 详细步骤

1. 上传文件（支持多文件）
2. 告知后端对文件进行处理，返回文件id
3. 告知后端文件id，以及需要绑定的参数，进行最终的数据导入。